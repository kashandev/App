<!DOCTYPE html><html><?php echo $header; ?><body class="skin-josh"><?php echo $page_header; ?><div class="wrapper row-offcanvas row-offcanvas-left"><?php echo $column_left; ?><!-- Right side column. Contains the navbar and content of the page --><!--page level css --><link rel="stylesheet" type="text/css" href="./assets/datatables/css/buttons.bootstrap.css" /><link rel="stylesheet" type="text/css" href="./assets/datatables/css/colReorder.bootstrap.css" /><link rel="stylesheet" type="text/css" href="./assets/datatables/css/rowReorder.bootstrap.css"><link rel="stylesheet" type="text/css" href="./assets/datatables/css/buttons.bootstrap.css" /><link rel="stylesheet" type="text/css" href="./assets/datatables/css/scroller.bootstrap.css" /><link href="./assets/jasny-bootstrap.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="./assets/iCheck/css/all.css"><link rel="stylesheet" type="text/css" href="./assets/iCheck/css/line/line.css"><script type="text/javascript" src="./assets/iCheck/js/icheck.js"></script><!--end of page level css--><aside class="right-side"><!-- Content Header (Page header) --><section class="content-header">    <div class="row">        <div class="col-sm-6">            <h1><?php echo $lang['heading_title']; ?></h1>            <ol class="breadcrumb">                <?php foreach($breadcrumbs as $breadcrumb): ?>                <li>                    <a href="<?php echo $breadcrumb['href']; ?>">                        <i class="<?php echo $breadcrumb['class']; ?>"></i>                        <?php echo $breadcrumb['text']; ?>                    </a>                </li>                <?php endforeach; ?>            </ol>        </div>        <div class="col-sm-6">            <div class="action-button">                <?php if(isset($isEdit) && $isEdit==1): ?>                <?php if($is_post == 0): ?>                <a class="btn btn-info" href="<?php echo $action_post; ?>">                    <i class="fa fa-thumbs-up"></i>                    &nbsp;<?php echo $lang['post']; ?>                </a>                <?php endif; ?><!--                 <button type="button" class="btn btn-info" href="javascript:void(0);" onclick="getDocumentLedger();">                    <i class="fa fa fa-balance-scale"></i>                    &nbsp;<?php echo $lang['ledger']; ?>                </button> --><!--                 <a class="btn btn-info" target="_blank" href="<?php echo $action_print; ?>">                    <i class="fa fa-print"></i>                    &nbsp;<?php echo $lang['print']; ?>                </a>                <a class="btn btn-success" target="_blank" href="<?php echo $action_print_excel; ?>">                    <i class="fa fa-print"></i>                    &nbsp;Excel                </a> -->                <?php endif; ?>                <a class="btn btn-default" href="<?php echo $action_cancel; ?>">                    <i class="fa fa-undo"></i>                    &nbsp;<?php echo $lang['cancel']; ?>                </a>                <?php if($is_post == 0): ?>                <a class="btn btn-primary" href="javascript:void(0);" onclick="$('#form').submit();">                    <i class="fa fa-floppy-o"></i>                    &nbsp;<?php echo $lang['save']; ?>                </a>                <?php endif; ?>                <?php if($is_post == 1): ?>                <a class="btn btn-info" target="_blank" href="<?php echo $action_print_barcode; ?>">                    <i class="fa fa-print"></i>                    &nbsp;Print                 </a>                <?php endif; ?>            </div>        </div>    </div></section><?php if ($error_warning) { ?><div class="col-sm-12">    <div class="alert alert-danger alert-dismissable">        <button class="close" aria-hidden="true" data-dismiss="alert" type="button">x</button>        <?php echo $error_warning; ?>    </div></div><?php } ?><?php  if ($success) { ?><div class="col-sm-12">    <div class="alert alert-success alert-dismissable">        <button class="close" aria-hidden="true" data-dismiss="alert" type="button">x</button>        <?php echo $success; ?>    </div></div><?php  } ?><!-- Main content --><!-- Main content --><section class="content"><div class="row padding-left_right_15"><div class="col-xs-12"><input type="hidden" value="<?php echo $document_type_id; ?>" name="document_type_id" id="document_type_id" /><input type="hidden" value="<?php echo $document_id; ?>" name="document_id" id="document_id" /><form  action="<?php echo $action; ?>" method="post" enctype="multipart/form-data" id="form"><div class="row"><div class="col-md-12"><div class="panel panel-primary" id="hidepanel1"><div class="panel-heading" style="background-color: #90a4ae;">    <h3 class="panel-title"><i class="fa fa-credit-card" ></i>&nbsp;&nbsp;<?php echo $breadcrumb['text']; ?></h3></div><div class="panel-body"><fieldset><div class="row">    <div class="col-sm-3">        <div class="form-group">            <label><?php echo $lang['document_no']; ?></label>            <input class="form-control" type="text" name="document_identity" readonly="readonly" value="<?php echo $document_identity; ?>" placeholder="Auto" />        </div>    </div>    <div class="col-sm-3">        <div class="form-group">            <label><span class="required">*</span>&nbsp;<?php echo $lang['document_date']; ?></label>            <input class="form-control dtpDate" type="text" name="document_date" value="<?php echo $document_date; ?>" />        </div>    </div></div><div class="row">    <div class="col-sm-3 hide">        <div class="form-group">            <label><?php echo $lang['warehouse'] ?></label>            <select class="form-control select2-default" id="warehouse_id" name="warehouse_id" >                <option value="">&nbsp;</option>                <?php foreach($warehouses as $warehouse): ?>                <option value="<?php echo $warehouse['warehouse_id']; ?>" <?php echo ($warehouse_id == $warehouse['warehouse_id']?'selected="true"':''); ?>><?php echo $warehouse['name']; ?></option>                <?php endforeach; ?>            </select>        </div>    </div></div><div class="row">    <div class="col-sm-6">        <div class="form-group">            <label><?php echo $lang['remarks']; ?></label>            <input class="form-control" type="text" name="remarks" id="remarks" value="<?php echo $remarks; ?>" />        </div>    </div></div><br><br><div class="row"><div class="col-sm-12"><div class="table-responsive form-group"><table id="tblStockIn" class="table table-striped table-bordered" style="width: 4000px !important;"><thead><tr align="center" data-row_id="H">    <td style="width: 7px; !important;">        <a title="Add" class="btn btn-xs btn-primary btnAddGrid" href="javascript:void(0);"><i class="fa fa-plus"></i></a>    </td>    <td style="width: 300px"><?php echo $lang['product_code']; ?></td>    <td style="width: 350px"><?php echo $lang['product_name']; ?></td>    <td style="width: 300px"><?php echo $lang['description']; ?></td><!--     <td style="width: 300px"><?php echo $lang['serial_no']; ?></td> -->    <td style="width: 300px"><?php echo $lang['warehouse']; ?></td>    <td style="width: 300px"><?php echo $lang['stock_unit']; ?></td>    <td style="width: 150px"><?php echo $lang['quantity']; ?></td>    <td style="width: 150px"><?php echo $lang['unit_price']; ?></td>    <td style="width: 150px;"><?php echo $lang['total_price']; ?></td>    <td style="width: 7px; !important;">        <a title="Add" class="btn btn-xs btn-primary btnAddGrid" href="javascript:void(0);"><i class="fa fa-plus"></i></a>    </td></tr></thead><tbody ><?php foreach($stock_in_details as $grid_row => $detail): ?><tr id="grid_row_<?php echo $grid_row; ?>" data-row_id="<?php echo $grid_row; ?>">    <td>        <a onclick="removeRow(this);" title="Remove" class="btn btn-xs btn-danger" href="javascript:void(0);"><i class="fa fa-times"></i></a>        <a title="Add" class="btn btn-xs btn-primary btnAddGrid" href="javascript:void(0);"><i class="fa fa-plus"></i></a>    </td><!--     <td>        <input type="hidden" name="stock_in_details[<?php echo $grid_row; ?>][purchase_order_detail_id]" id="stock_in_detail_purchase_order_detail_id_<?php echo $grid_row; ?>" value="<?php echo $detail['purchase_order_detail_id']; ?>" />        <input type="hidden" name="stock_in_details[<?php echo $grid_row; ?>][goods_received_detail_id]" id="stock_in_detail_goods_received_detail_id_<?php echo $grid_row; ?>" value="<?php echo $detail['goods_received_detail_id']; ?>" />        <input type="hidden" name="stock_in_details[<?php echo $grid_row; ?>][ref_document_type_id]" id="stock_in_detail_ref_document_type_id_<?php echo $grid_row; ?>" value="<?php echo $detail['ref_document_type_id']; ?>" />        <input type="hidden" name="stock_in_details[<?php echo $grid_row; ?>][ref_document_identity]" id="stock_in_detail_ref_document_identity_<?php echo $grid_row; ?>" value="<?php echo $detail['ref_document_identity']; ?>" />        <a target="_blank" href="<?php echo $detail['href']; ?>"><?php echo $detail['ref_document_identity']; ?></a>    </td> -->    <!--<td style="min-width: 150px;">        <?php if( !empty($detail['ref_document_identity']) ): ?>        <input type="hidden" name="stock_in_details[<?= $grid_row ?>][project_id]" id="stock_in_detail_project_id_<?php echo $grid_row; ?>" value="<?= $detail['project_id'] ?>">        <input type="hidden" name="stock_in_details[<?= $grid_row ?>][sub_project_id]" id="stock_in_detail_sub_project_id_<?php echo $grid_row; ?>" value="<?= $detail['sub_project_id'] ?>">        <input type="text" class="form-control" value="<?= $detail['project'] .' - '. $detail['sub_project'] ?>" readonly>        <?php else: ?>        <input type="hidden" id="stock_in_detail_project_id_<?= $grid_row ?>" name="stock_in_details[<?= $grid_row ?>][project_id]" value="<?= $detail['project_id'] ?>" />        <select class="form-control Select2SubProject " id="stock_in_detail_sub_project_id_<?= $grid_row ?>" name="stock_in_details[<?= $grid_row ?>][sub_project_id]"  style="width: 350px">            <option value="<?= $detail[sub_project_id] ?>"><?= $detail['project'].' - '.$detail['sub_project'] ?></option>        </select>        <?php endif; ?>        <label for="stock_in_detail_sub_project_id_<?= $grid_row ?>" class="error" style="display: none"></label>    </td>-->    <td>        <input type="text" onchange="getProductByCode(this)"  class="form-control Select2Product" name="stock_in_details[<?= $grid_row ?>][product_code]" id="stock_in_detail_product_code_<?= $grid_row ?>" value="<?= $detail['product_code'] ?>" />    </td>    <td style="min-width: 250px;">      <input type="hidden" class="form-control" name="stock_in_details[<?php echo $grid_row; ?>][serial_no]" id="stock_in_detail_serial_no_<?php echo $grid_row; ?>" value="<?php echo $detail['serial_no']; ?>" /><!--         <input type="hidden" id="stock_in_detail_type_of_material_<?php echo $grid_row; ?>" value="<?php echo $detail['type_of_material']; ?>" />        <?php if( !empty($detail['ref_document_identity']) ): ?>        <input type="hidden" name="stock_in_details[<?php echo $grid_row; ?>][product_code]" id="stock_in_detail_product_code_<?php echo $grid_row; ?>" value="<?php echo $detail['product_code']; ?>" />        <input type="hidden" id="stock_in_detail_product_id_<?php echo $grid_row; ?>" name="stock_in_details[<?php echo $grid_row; ?>][product_id]" value="<?= $detail['product_id'] ?>">        <input type="text" class="form-control" value="<?= implode(' - ', array(                    $detail['product_code'],                    $detail['brand'],                    $detail['model'],                    $detail['product_name'],                )) ?>" readonly>        <?php else: ?> -->        <select class="required form-control Select2Product required" id="stock_in_detail_product_id_<?= $grid_row ?>" name="stock_in_details[<?= $grid_row ?>][product_id]" required>            <option value="<?= $detail['product_id'] ?>"><?= implode(' - ', array(                    $detail['product_code'],                    $detail['product_name']                )) ?></option>        </select><!--         <?php endif; ?> -->        <label for="stock_in_detail_product_id_<?= $grid_row ?>" class="error" style="display: none"></label>    </td>    <td>        <textarea  type="text" style="width: 200px" rows="2" class="form-control" name="stock_in_details[<?php echo $grid_row; ?>][description]" id="stock_in_detail_description_<?php echo $grid_row; ?>"><?php echo $detail['description']; ?></textarea>    </td>    <td >        <select style="width: 300px" required name="stock_in_details[<?php echo $grid_row; ?>][warehouse_id]" id="stock_in_detail_charge_warehouse_id_<?php echo $grid_row; ?>" class="form-control select2 required">            <option value="">&nbsp;</option>            <?php foreach($warehouses as $warehouse): ?>            <option value="<?php echo $warehouse['warehouse_id']; ?>" <?php echo ($detail['warehouse_id'] == $warehouse['warehouse_id']?'selected="true"':''); ?>><?php echo $warehouse['name']; ?></option>            <?php endforeach; ?>        </select>        <label for="stock_in_detail_warehouse_id_<?php echo $grid_row; ?>" class="error" style="display: none"></label>    </td>    <td>        <input type="hidden" name="stock_in_details[<?php echo $grid_row; ?>][unit_id]" id="stock_in_detail_unit_id_<?php echo $grid_row; ?>" value="<?php echo $detail['unit_id']; ?>" />        <input type="text" class="form-control" name="stock_in_details[<?php echo $grid_row; ?>][unit]" id="stock_in_detail_unit_<?php echo $grid_row; ?>" value="<?php echo $detail['unit']; ?>" readonly="readonly" />    </td>    <td>        <input type="text" onchange="calculateQuantity(this);" style="min-width: 100px; text-align: right" class="form-control fPDecimal" name="stock_in_details[<?= $grid_row ?>][qty]" id="stock_in_detail_qty_<?= $grid_row ?>" value="<?= $detail['qty'] ?>"/>    </td>    <td>        <input type="text" onchange="calculateTotalRow(this);" style="min-width: 100px; text-align: right" class="form-control fPDecimal" name="stock_in_details[<?= $grid_row ?>][unit_price]" id="stock_in_detail_unit_price_<?= $grid_row ?>" value="<?= $detail['unit_price'] ?>" readonly/>    </td>    <td>        <input type="text" onchange="calculateTotalRow(this);" style="min-width: 100px; text-align: right" class="form-control fPDecimal" id="stock_in_detail_total_price_<?= $grid_row ?>"  name="stock_in_details[<?= $grid_row ?>][total_price]" value="<?= $detail['total_price'] ?>" readonly />    </td>    <td>        <a onclick="removeRow(this);" title="Remove" class="btn btn-xs btn-danger" href="javascript:void(0);"><i class="fa fa-times"></i></a>        &nbsp;        <a title="Add" class="btn btn-xs btn-primary btnAddGrid" href="javascript:void(0);"><i class="fa fa-plus"></i></a>    </td></tr><?php endforeach; ?><?php $grid_row = count($stock_in_details); ?></tbody><tfoot><tr align="center" data-row_id="H">    <td colspan="6" style="text-align: right"><b>Total</b></td>    <td>        <input class="form-control fDecimal" type="text" id="qty_master" name="qty_master" value="<?php echo round_decimal($qty_master,4); ?>" readonly="readonly" />    </td>      <td></td>        <td>        <input class="form-control fDecimal" type="text" id="total_price_master" name="total_price_master" value="<?php echo round_decimal($total_price_master,2); ?>" readonly="readonly" />    </td>    <td style="width: 1%; !important;"></td></tr></tfoot></table></div></div></div></div></fieldset></div></div></div></div></form></div><!-- /.col --></div><!-- /.row --></section><!-- /.content --></aside><!-- right-side --></div><a id="back-to-top" href="#" class="btn btn-primary btn-lg back-to-top" role="button" title="Return to top" data-toggle="tooltip" data-placement="left">    <i class="livicon" data-name="plane-up" data-size="18" data-loop="true" data-c="#fff" data-hc="white"></i></a><?php echo $page_footer; ?><?php echo $footer; ?><link rel="stylesheet" href="./assets/plugins/dataTables/dataTables.bootstrap.css"><script src="./assets/plugins/dataTables/jquery.dataTables.js"></script><script src="./assets/plugins/dataTables/dataTables.bootstrap.js"></script><script type="text/javascript" src="./admin/view/js/inventory/stock_in.js"></script><script type="text/javascript" src="./assets/validate/jquery.validate.min.js"></script><script src="./assets/jasny-bootstrap.js" type="text/javascript"></script><script>    jQuery('#form').validate(<?php echo $strValidation; ?>);    var $lang = <?php echo json_encode($lang) ?>;    var $grid_row = '<?php echo $grid_row; ?>';    var $UrlGetProductJSON = '<?php echo $href_get_product_json; ?>';    var $warehouses = <?php echo json_encode($warehouses) ?>;    var $UrlGetProductSerialNo = '<?php echo $href_get_product_serial_no; ?>';    function formatRepo (repo) {        if (repo.loading) return repo.text;        var markup = "<div class='select2-result-repository clearfix'>";//        if(repo.image_url) {//            markup +="<div class='select2-result-repository__avatar'><img src='" + repo.image_url + "' /></div>";//        }        markup +="<div class='select2-result-repository__meta'>";        markup +="  <div class='select2-result-repository__title'>" + repo.name + "</div>";//        if (repo.description) {//            markup += "<div class='select2-result-repository__description'>" + repo.description + "</div>";//        }//        markup += "<div class='select2-result-repository__statistics'>" +//                "   <div class='help-block'>" + repo.length + " X " + repo.width + " X " + repo.thickness + "</div>" +        "</div>" +        "</div></div>";        return markup;    }    function formatRepoSelection (repo) {        return repo.name || repo.text;    }    function Select2StockIn(obj) {        var $Url = '<?php echo $href_get_json_products_for_stock_in; ?>';        select2OptionList(obj,$Url);    }    <?php if($this->request->get['stock_in_id']): ?>    $(document).ready(function() {        $('.Select2Product').each(function(index, element){            var $ele = $(element);            var $row_id = $ele.parent().parent().data('row_id');            Select2StockIn('#stock_in_detail_product_id_'+$row_id);            $('#stock_in_detail_product_id_'+$row_id).on('select2:select', function (e) {                var $row_id = $(this).parent().parent().data('row_id');                var $data = e.params.data;                $('#stock_in_detail_product_code_'+$row_id).val($data['product_code']);            });        });    });    <?php endif; ?>    $('#form').on('submit', function(){        console.log( $(this).valid() )    });</script></body></html>